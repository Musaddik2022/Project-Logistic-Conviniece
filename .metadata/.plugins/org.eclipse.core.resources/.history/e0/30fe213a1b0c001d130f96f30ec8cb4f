package com.flipside.api.services;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import com.flipside.api.Entities.ServiceProvider;
import com.flipside.api.Entities.User;
import com.flipside.api.Repository.ServiceProviderDao;
import com.flipside.api.Repository.UserDao;

@org.springframework.stereotype.Service
public class Service {
    @Autowired
	private UserDao userDao;
    @Autowired
	private ServiceProviderDao serviceDao;
	
	public String addUser(User user) {
		User result = userDao.save(user);
		return "user registerd";
	}

	public String getUser(String email, String password) {
		User user = userDao.verifyUser(email,password);
		if(user!=null) {
			return Integer.toString(user.getId());
		}
		return "not verified";
	}

	public String addservice(ServiceProvider sp) {
		ServiceProvider result = serviceDao.save(sp);
		if(result!=null) {
			return "service registered";
		}
		return "not Registerd";
	}

	public String getService(String email, String password) {
        ServiceProvider result = serviceDao.verifyService(email,password);
        if(result!=null) {
        	return "verified";
        }
		return "not verified";
	}

	public List<ServiceProvider> getTopCarpenter() {
		List<ServiceProvider> result = new ArrayList<ServiceProvider>();
		ServiceProvider first = serviceDao.getFirstCarpenter()[0]; 
		ServiceProvider second = serviceDao.getSecondCarpenter()[0];
		ServiceProvider third = serviceDao.getThirdCarpenter()[0];
		result.add(first);
		result.add(second);
		result.add(third);
		return result;
	}

}
